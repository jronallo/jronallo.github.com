<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <link rel="canonical" href="http://ronallo.com/blog/web-data-commons-microdata/">
    <!-- FIXME: After DNS caches have been cleared it will be safe to put this redirect in place. -->
    <!-- <meta http-equiv="refresh" content="0;URL=http://ronallo.com/blog/web-data-commons-microdata/"> -->



    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Common Crawl, Web Data Commons, and Microdata | Preliminary Inventory of Digital Collections by Jason Ronallo</title>

    <link href="/stylesheets/normalize-ef7858ef.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all-7cf8716f.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all-fe1cfabb.js" type="text/javascript"></script>
    <link href="/images/images/favicon.png" rel="icon" type="image/png" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,500,300' rel='stylesheet' type='text/css'>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28548205-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </head>

  <body class="blog blog_web-data-commons-microdata blog_web-data-commons-microdata_index">
    <div id="page-wrap">
      <header id="masthead" class="site-header" role="banner">
  <a class="home-link" href="/" rel="home">
    <h1 class="site-title">Preliminary Inventory of Digital Collections</h1>
    <h2 class="site-description hidden-xs">Incomplete thoughts on digital libraries.</h2>
  </a>
</header>
      <nav class="navbar navbar-default" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <!-- <a class="navbar-brand" href="/">Preliminary Inventory of Digital Collections</a> -->
  </div>

  <!-- Collect the nav links, forms, and other content for toggling -->
  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Blog <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/">Latest</a></li>
          <li><a href="/blog/tags">Tags</a></li>
          <li><a href="/blog/by_year">Calendar</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">CV <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="/projects">Projects</a></li>
          <li><a href="/presentations">Presentations</a></li>
          <li><a href="/writing">Writing</a></li>
          <li><a href="/experience">Experience</a></li>
          <li><a target="_blank" href="/cv">Print Full CV</a></li>
        </ul>
      </li>


      <li><a href="/about">About</a></li>
      <li><a href="/feed.xml"><i class="icon-rss-sign"></i> </a></li>
    </ul>

    <form class="navbar-form navbar-right" action="http://google.com/search" method="get" role="search">
      <div class="form-group">
        <input type="hidden" name="q" value="site:jronallo.github.io">
        <input class="search form-control" type="text" name="q" results="0" placeholder="Search...">
        </div>
    </form>

  </div><!-- /.navbar-collapse -->
</nav>
      <div class="container">
        <div id="redirect_message">
          <p class="large">This page has permanently moved to <a href="http://ronallo.com/blog/web-data-commons-microdata/">http://ronallo.com/blog/web-data-commons-microdata/</a></p>
          <p class="small">The stale content is below for a limited time for your convenience while DNS caches get expired.</p>
        </div>
          <article>
    <h1>Common Crawl, Web Data Commons, and Microdata</h1>
    <p>Published: 2012-01-30 10:38:08 -0500</p>
    
    <p>The other day I discovered the <a href="http://webdatacommons.org">Web Data Commons</a>, which is building on top of the <a href="http://www.commoncrawl.org/">Common Crawl</a> to extract Microformat, Microdata, and RDFa data and make it available for free download. This means that there is starting to be free structured data from a big portion of the Web available for for anyone to play with at very low cost. Common Crawl takes care of the crawling and then Web Data Commons will do data extraction. This opens up new possibilities for services, specialized search, and aggregations of content. Big web data is being opened up for small startups and individuals.</p>



<p>I have written recently about how <a href="/blog/dpla-strawman-technical-proposal/">digital library aggregators</a> (like the <a href="http://dp.la/">DPLA</a>) could crawl a small slice of the Web for digital collections. The crawled pages could then be analyzed to extract text and data from them. Web Data Commons significantly simplifies and reduces the cost of that approach. Digital library aggregators would not have to do their own crawling or data extraction, which would significantly lower the cost.</p>

<p>Once the data is available it would even be possible to determine which of the pages <a href="/blog/solving-the-item-level-problem-on-the-web/">describe an item-level resource</a> and create aggregations around just those item-level resources. What the new big Web data from Common Crawl and Web Data Commons means is that it will soon be possible to create new aggregations or services around just the cultural heritage sector slice of this data at a very low cost. <a href="http://go.ncsu.edu/dplacaps">Collection Profiles</a> could help curate which part of the Web is of interest and focus data analysis further reducing the expense.</p>

<p>Libraries, archives, and museums (LAM) need to do a couple things though to be a part of the free big data Web which is forming.</p>

<h2 id="toc_0">1. Annotate</h2>

<p>LAM Web sites need to be annotated with some form of embedded semantic markup (Microformats, RDFa, or <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html">Microdata</a>). These annotations will not only benefit collections by providing new aggregations and services, but also enable the search engines to send better traffic. Because of the relative simplicity of Microdata and <a href="http://schema.org">Schema.org</a>, I will be focusing my efforts on understanding these technologies and how they could better work for LAMs. For instance, we already know that LAMs could advocate for better coverage in Schema.org.</p>

<h2 id="toc_1">2. Get Crawled</h2>

<p>The Common Crawl <a href="http://www.commoncrawl.org/blog/#Google">only crawls a portion of the Web</a>, and it tries to crawl quality sites and not fetch or cache junk. In order to be included in Common Crawl, a site needs to allow the Common Crawl robot to have access. If your site has a <a href="http://www.robotstxt.org/">robots.txt</a> then it should not restrict the <a href="http://api.commoncrawl.org/faq.htm">ccBot</a>. The Common Crawl does not support the sitemap protocol yet. I have not been able to find information on how to submit or request a site be crawled. As Common Crawl ramps up to doing more frequent crawls, LAMs will want to figure out how to have their trusted, unique content crawled.</p>

<p>Common Crawl does provide a way to check whether your site is already included. You can <a href="http://api.commoncrawl.org/domainQuery.html">query the URL database</a>. I searched for one of the digital collections sites I developed and discovered that they know about the existence of the site, but have not fetched any pages. I would be interested in hearing from others whether their digital collections or other sites are included and have been fetched and cached.</p>

<p>Another use for this Common Crawl API is to discover the cache file location for a URL. It is then possible to run a map/reduce job on just the ARC files containing the desired URLs. If the Web Data Commons does not provide enough information, it would be possible in a targeted way to get the page from the Common Crawl.</p>

<h2 id="toc_2">The Microdata</h2>

<p>The data that Web Data Commons has extracted so far is from just a small portion (1%) of what is available from the Common Crawl. The analysis was also done on one of the older data sets. I still wanted to see what the <a href="https://s3.amazonaws.com/ccrdf1p/data/ccrdf.html-microdata.nq">Microdata</a> looked like, so I downloaded it and ran the following script over it. The data is provided as N-Quads. There is probably much more interesting analysis that could be done, but I just wanted to see quickly what context domains were included and which vocabularies were used as predicates.</p>

<figure class='code'>
              <figcaption><span>Parse the microdata from Web Data Commons and output a little information. </span><a href='https://gist.github.com/jronallo/1701852'>source gist</a></figcaption>
              <div>
                <pre class="highlight ruby"><span class="c1">#!/usr/bin/env ruby</span>

<span class="c1"># ccwd_microdata.rb /path/to/ccrdf.html-microdata.nq</span>
<span class="nb">require</span> <span class="s1">&#39;pp&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;rdf&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;rdf/nquads&#39;</span>

<span class="k">if</span> <span class="o">!</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
  <span class="nb">puts</span> <span class="s2">&quot;must supply path to nquads file&quot;</span>
  <span class="nb">exit</span>
<span class="k">end</span>

<span class="n">domains</span> <span class="o">=</span> <span class="o">[]</span>
<span class="n">predicates</span> <span class="o">=</span> <span class="o">[]</span>

<span class="no">RDF</span><span class="o">::</span><span class="no">NQuads</span><span class="o">::</span><span class="no">Reader</span><span class="nf">.open</span><span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">reader</span><span class="o">|</span>
  <span class="n">reader</span><span class="nf">.each_statement</span> <span class="k">do</span> <span class="o">|</span><span class="n">statement</span><span class="o">|</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">statement</span><span class="nf">.context.nil?</span>
      <span class="n">domains</span> <span class="o">&lt;&lt;</span> <span class="n">statement</span><span class="nf">.context.host</span>
    <span class="k">end</span>
    <span class="n">predicates</span> <span class="o">&lt;&lt;</span> <span class="n">statement</span><span class="nf">.predicate.to_s</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">domains</span><span class="nf">.uniq!</span>
<span class="n">predicates</span><span class="nf">.uniq!</span>

<span class="nb">puts</span> <span class="s2">&quot;CONTEXT DOMAINS: </span><span class="si">#{</span><span class="n">domains</span><span class="nf">.length</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">pp</span> <span class="n">domains</span><span class="nf">.sort</span>
<span class="nb">puts</span> <span class="s2">&quot;===========================</span><span class="se">\n</span><span class="s2">PREDICATES: </span><span class="si">#{</span><span class="n">predicates</span><span class="nf">.length</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">pp</span> <span class="n">predicates</span><span class="nf">.sort</span></pre>
              </div>
            </figure>

<p>This Microdata set is one of the smaller sets of data Web Data Commons makes available, containing just 17890 triples from 1298 URLs. I found 122 hosts represented in this set. Since the Microdata is from before Schema.org was released, most of the 111 predicates used where from <a href="http://data-vocabulary.org">data-vocabulary</a> which was Google&rsquo;s precursor to the more extensive Schema.org. I found an error in the set where one object of a statement was just &ldquo;http:&rdquo; with no more content. Removing that error and it ran through cleanly.</p>

<p>I am interested in seeing what other folks are able to do with this new corpus of free data. Please let me know if you play with it and come up with anything. Any libraries, archives, or museums already represented in any of the data sets?</p>

  </article>
  <hr>
  <div class="pagination">
    
      <a class="btn btn-default" style="white-space: normal" href="/blog/listing-published-octopress-posts/">
        <i class="icon-arrow-left"></i> Listing Published Octopress Posts
      </a>
    
    
      <a class="btn btn-default" style="white-space: normal" href="/blog/code4lib-presentation-on-html5-microdata-and-schema-dot-org-slides/">
        Slides from Code4lib Presentation on HTML5 Microdata and Schema.org <i class="icon-arrow-right"></i>
      </a>
    
  </div>

      </div>
      <div id="footer-push"></div>
    </div><!-- end page-wrap -->
    <footer id="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-6">by Jason Ronallo</div>
      <div class="col-md-6 social">
        <a href="mailto:jronallo@gmail.com"><i class="icon-envelope"></i></a>
        <a href="https://plus.google.com/116830234234977722391?rel=author"><i class="icon-google-plus-sign"></i></a>
        <a href="http://twitter.com/ronallo"><i class="icon-twitter-sign"></i></a>
      </div>
    </div>
  </div>
</footer>
  </body>
</html>